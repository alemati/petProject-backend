(this.webpackJsonppet_project=this.webpackJsonppet_project||[]).push([[0],{94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n(27),s=n.n(a),u=n(18),i=n(4),o=n(2),l=n.n(o),j=n(6),d=n(10),f=n.n(d),b={login:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,console.log("response was:",n),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O="/api/users",p=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(O,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={getAll:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(O));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getById:p,createNew:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(O,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){"bearer ".concat(e)},removeToken:function(){null},update:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(O,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},x="/api/posts",v=null,m=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(x,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(x));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(x,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={getAll:g,getById:m,createNew:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,f.a.post(x,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){v="bearer ".concat(e)},removeToken:function(){v=null},update:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(x,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:w},y="/api/comments",N=null,T=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(y,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(y));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(y,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S={getAll:I,getById:T,createNew:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("token is:",N),console.log("newObject (comment) is:",t),n={headers:{Authorization:N}},e.next=5,f.a.post(y,t,n);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){N="bearer ".concat(e)},removeToken:function(){N=null},update:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(y,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:E},C="/api/skills",_=null,A=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(C,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(C));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(C,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U={getAll:R,getById:A,createNew:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:_}},e.next=3,f.a.post(C,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){_="bearer ".concat(e)},removeToken:function(){_=null},update:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(C,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:L},M=function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(r){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"SET_NOTIFICATION",data:{type:e,content:t}});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},B=function(e){return function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"CLOSE_NOTIFICATION"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLOSE_NOTIFICATION":return null}return e},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null}return e},q=n(46),D=n(13),W=function(){var e=Object(i.c)((function(e){return e.notification}));Object(D.f)(),Object(i.b)();if(null===e)return null;e.type;return Object(r.jsx)(q.a,{variant:"danger",children:Object(r.jsxs)("p",{children:[" ",e.content," "]})})},F=n(22),H=n(12),G=n(11),J=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),d=o[0],f=o[1],O=Object(i.b)();Object(D.f)();O(B());return Object(r.jsx)("div",{children:Object(r.jsxs)(F.a.Dialog,{children:[Object(r.jsx)(F.a.Header,{children:Object(r.jsx)(F.a.Title,{children:"Login"})}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("logining is with:",n,d),O(function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(r){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.login({username:e,password:t});case 3:c=n.sent,window.localStorage.setItem("loggedProjectUser",JSON.stringify(c)),h.setToken(c.token),k.setToken(c.token),S.setToken(c.token),U.setToken(c.token),r({type:"LOGIN",data:c}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),r(M("error","Wrong credentials")),setTimeout((function(){r(B())}),3e3);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(n,d))},children:[Object(r.jsxs)(F.a.Body,{children:["Username ",Object(r.jsx)("input",{type:"text",value:n,placeholder:"3-10 symbols",onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("br",{}),"Password ",Object(r.jsx)("input",{type:"password",value:d,placeholder:"3-10 symbols",onChange:function(e){return f(e.target.value)}})]}),Object(r.jsxs)(F.a.Footer,{children:[Object(r.jsx)(W,{}),Object(r.jsx)(H.a,{type:"submit",children:"Login"}),"     ",Object(r.jsx)(G.b,{to:"/createUser",children:"create new user"})]})]})]})})},V=function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.update(e.id,e);case 2:r=t.sent,n({type:"UPDATE_USER",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_USER":return e.concat(t.data);case"INIT_USERS":return t.data;case"UPDATE_USER":var n=t.data.id;return e.map((function(e){return e.id!==n?e:t.data}))}return e},Y=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),d=o[0],f=o[1],b=Object(c.useState)(""),O=Object(u.a)(b,2),p=O[0],x=O[1],v=Object(c.useState)(""),m=Object(u.a)(v,2),g=m[0],w=m[1],k=Object(D.f)(),y=Object(i.b)();return Object(r.jsx)("div",{children:Object(r.jsxs)(F.a.Dialog,{children:[Object(r.jsx)(F.a.Header,{children:Object(r.jsx)(F.a.Title,{children:"Sign in"})}),Object(r.jsxs)("form",{onSubmit:function(e){var t;(e.preventDefault(),console.log("creating new user with:",n,d,p,g),""===n||""===d||""===p||""===g)?(y(M("error","Give all required info, please")),setTimeout((function(){y(B())}),2e3)):(y((t={username:n,url:p,password:d,name:g},function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.createNew(t);case 3:r=e.sent,n({type:"CREATE_NEW_USER",data:r}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error is:",e.t0.config),n(M("error",e.t0.name)),setTimeout((function(){n(B())}),3e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),k.push("/"))},children:[Object(r.jsxs)(F.a.Body,{children:["Username ",Object(r.jsx)("input",{type:"text",value:n,placeholder:"3-10 symbols",onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("br",{}),"Password ",Object(r.jsx)("input",{type:"password",value:d,placeholder:"3-10 symbols",onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("br",{}),"URL ",Object(r.jsx)("input",{type:"text",value:p,placeholder:"3-10 symbols",onChange:function(e){return x(e.target.value)}}),Object(r.jsx)("br",{}),"Name ",Object(r.jsx)("input",{type:"text",value:g,placeholder:"at least 1 character",onChange:function(e){return w(e.target.value)}})]}),Object(r.jsxs)(F.a.Footer,{children:[Object(r.jsx)(W,{}),Object(r.jsx)(H.a,{type:"submit",children:"Create new user"}),"     ",Object(r.jsx)(G.b,{to:"/",children:"Login"})]})]})]})})},Q=n(8),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_POST":return e.concat(t.data);case"INIT_POSTS":return t.data;case"REMOVE_POST":var n=e.filter((function(e){return e.id!==t.data}));return n}return e},Z=n(24),$=n(17),ee=function(){var e=Object(i.b)(),t=Object(D.f)(),n=Object(i.c)((function(e){return e.login}));if(!n)return null;return Object(r.jsxs)("div",{className:"topBar",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)("h2",{children:"Welcome"})}),Object(r.jsx)("div",{className:"col-sm-8",children:Object(r.jsxs)("p",{children:["Logged in as ",n.name]})}),Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(H.a,{className:"deleteButton",onClick:function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.removeToken(),k.removeToken(),S.removeToken(),U.removeToken(),window.localStorage.removeItem("loggedProjectUser"),t({type:"LOGOUT"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.push("/")},children:"logout"})})]}),Object(r.jsx)(W,{})]})},te=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(G.b,{to:"/home",children:"Posts"})," ",Object(r.jsx)("br",{}),Object(r.jsx)(G.b,{to:"/connections",children:"Connections"})," ",Object(r.jsx)("br",{}),Object(r.jsx)(G.b,{to:"/personal",children:"Personal"})," ",Object(r.jsx)("br",{})]})},ne=function(e){var t=e.login,n=e.users,c=e.allOtherUsers,a=e.myRecieved,s=n.find((function(e){return e.username===t.username}));if(!s)return null;var u=c.filter((function(e){if(e.friends.includes(s.id))return e}));return 0===a.length?Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"My friends"}),Object(r.jsx)("hr",{}),u.map((function(e){return Object(r.jsx)(re,{user:e,users:n,login:t,status:"friend"},e.id)}))]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Friend request"}),Object(r.jsx)("hr",{}),a.map((function(e){return Object(r.jsx)(re,{user:e,users:n,login:t,status:"received"},e.id)})),Object(r.jsx)("h5",{children:"My friends"}),Object(r.jsx)("hr",{}),u.map((function(e){return Object(r.jsx)(re,{user:e,users:n,login:t,status:"friend"},e.id)}))]})},re=function(e){var t=e.user,n=e.users,c=e.login,a=e.status,s=Object(i.b)();return"request"===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(G.b,{to:"/user/".concat(t.url),children:t.name}),"   ",Object(r.jsx)(H.a,{className:"rightButton",onClick:function(){return function(e){console.log("I changed my mind");var r=n.find((function(e){return e.username===c.username})),a=r.requests.filter((function(t){return t!==e})),u=Object(Q.a)(Object(Q.a)({},r),{},{requests:a}),i=n.find((function(e){return e.username===t.username})),o=i.received.filter((function(e){return e!==r.id})),l=Object(Q.a)(Object(Q.a)({},i),{},{received:o});s(V(u)),s(V(l))}(t.id)},children:"Remove request"}),Object(r.jsx)("hr",{})]}):"received"===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(G.b,{to:"/user/".concat(t.url),children:t.name})," ",Object(r.jsx)("br",{}),Object(r.jsx)(H.a,{onClick:function(){return function(e){console.log("I want to be a friend with you!!!");var r=n.find((function(e){return e.username===c.username})),a=r.received.filter((function(t){return t!==e})),u=r.friends.concat(e),i=Object(Q.a)(Object(Q.a)({},r),{},{received:a,friends:u}),o=n.find((function(e){return e.username===t.username})),l=o.requests.filter((function(e){return e!==r.id})),j=Object(Q.a)(Object(Q.a)({},o),{},{requests:l,friends:o.friends.concat(r.id)});s(V(i)),s(V(j))}(t.id)},children:"Accept"}),"  ",Object(r.jsx)(H.a,{onClick:function(){return function(e){var r=n.find((function(e){return e.username===c.username})),a=r.received.filter((function(t){return t!==e})),u=Object(Q.a)(Object(Q.a)({},r),{},{received:a}),i=n.find((function(e){return e.username===t.username})),o=i.requests.filter((function(e){return e!==r.id})),l=Object(Q.a)(Object(Q.a)({},i),{},{requests:o});s(V(u)),s(V(l))}(t.id)},children:"Decline"}),Object(r.jsx)("hr",{})]}):"friend"===a?Object(r.jsxs)("div",{children:[Object(r.jsx)(G.b,{to:"/user/".concat(t.url),children:t.name})," ",Object(r.jsx)(H.a,{className:"rightButton",onClick:function(){return function(e){var r=n.find((function(e){return e.username===c.username})),a=r.friends.filter((function(t){return t!==e})),u=Object(Q.a)(Object(Q.a)({},r),{},{friends:a}),i=n.find((function(e){return e.username===t.username})),o=i.friends.filter((function(e){return e!==r.id})),l=Object(Q.a)(Object(Q.a)({},i),{},{friends:o});s(V(u)),s(V(l))}(t.id)},children:"Remove friend"}),Object(r.jsx)("hr",{})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"col1",children:Object(r.jsx)(G.b,{to:"/user/".concat(t.url),className:"hiddenOverFlow",children:t.name})}),Object(r.jsxs)("div",{className:"col2",children:[Object(r.jsx)(H.a,{className:"rightButton",onClick:function(){return function(e){var r=n.find((function(e){return e.username===c.username})),a=Object(Q.a)(Object(Q.a)({},r),{},{requests:r.requests.concat(e)}),u=n.find((function(e){return e.username===t.username})),i=Object(Q.a)(Object(Q.a)({},u),{},{received:u.received.concat(r.id)});s(V(a)),s(V(i))}(t.id)},children:"Make a friend"}),Object(r.jsx)("hr",{})]})]})},ce=function(){var e=Object(i.c)((function(e){return e.users})),t=Object(i.c)((function(e){return e.login})),n=e.find((function(e){return e.username===t.username})),c=e.filter((function(e){return e.username!==t.username})),a=c.filter((function(e){if(e.received.includes(n.id))return e})),s=c.filter((function(e){if(e.requests.includes(n.id))return e})),u=c.filter((function(e){if(e.friends.includes(n.id))return e})),o=c.filter((function(e){return!a.includes(e)&&!s.includes(e)&&!u.includes(e)}));return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(ee,{}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(te,{})}),Object(r.jsxs)("div",{className:"col-sm-7",children:[Object(r.jsx)("h4",{children:"Contacts"}),Object(r.jsxs)(Z.a,{defaultActiveKey:"0",children:[Object(r.jsxs)($.a,{children:[Object(r.jsx)($.a.Header,{children:Object(r.jsx)(Z.a.Toggle,{as:$.a.Header,variant:"link",eventKey:"1",children:"Friends"})}),Object(r.jsx)(Z.a.Collapse,{eventKey:"1",children:Object(r.jsx)($.a.Body,{children:Object(r.jsx)(ne,{login:t,users:e,allOtherUsers:c,myRecieved:s})})})]}),Object(r.jsxs)($.a,{children:[Object(r.jsx)($.a.Header,{children:Object(r.jsx)(Z.a.Toggle,{as:$.a.Header,variant:"link",eventKey:"3",children:"My requests"})}),Object(r.jsx)(Z.a.Collapse,{eventKey:"3",children:Object(r.jsx)($.a.Body,{children:a.map((function(n){return Object(r.jsx)(re,{user:n,users:e,login:t,status:"request"},n.id)}))})})]})]})]}),Object(r.jsxs)("div",{className:"col-sm-3",children:[Object(r.jsx)("h4",{children:"Other users"}),Object(r.jsx)("div",{className:"user-list",children:o.map((function(n){return Object(r.jsx)(re,{user:n,users:e,login:t,status:"stranger"},n.id)}))})]})]})]})},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_COMMENT":return e.concat(t.data);case"INIT_COMMENTS":return t.data;case"REMOVE_COMMENT":var n=e.filter((function(e){return e.id!==t.data}));return n}return e},se=function(e){var t=e.postId,n=e.user,a=Object(i.b)(),s=Object(c.useState)(""),o=Object(u.a)(s,2),d=o[0],f=o[1],b=function(){var e,r={content:d,postId:t,user:n.id};f(""),a((e=r,function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.createNew(e);case 3:r=t.sent,n({type:"CREATE_NEW_COMMENT",data:r}),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error caught in commentsReducer",t.t0),n(M("error","Comment can be at least 3 and at most 200 charachters long!")),setTimeout((function(){n(B())}),3e3);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Comment"}),Object(r.jsx)("textarea",{className:"comment",value:d,placeholder:"Write a comment",onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)(H.a,{onClick:function(){return b()},type:"submit",children:"Comment"})]})},ue=function(e){var t=e.comment,n=Object(i.c)((function(e){return e.users})).find((function(e){return e.id===t.user}));return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[" ",t.content," ",Object(r.jsxs)("p",{className:"by",children:["by",Object(r.jsxs)(G.b,{className:"by",to:"/user/".concat(n.url),children:["\xa0",n.name]})]})," "]}),Object(r.jsx)("hr",{})]})},ie=function(e){var t=e.postId,n=Object(i.c)((function(e){return e.comments})).filter((function(e){return e.post===t}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Recent comments"}),Object(r.jsx)("div",{className:"comments-list",children:n.map((function(e){return Object(r.jsx)(ue,{comment:e},e.id)}))})]})},oe=function(e){var t=e.post,n=e.currentUser,c=Object(i.b)(),a=Object(i.c)((function(e){return e.users})),s=function(){var e,r=n.posts.filter((function(e){return e!==t.id})),a=Object(Q.a)(Object(Q.a)({},n),{},{posts:r});c((e=t.id,function(){var t=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.remove(e);case 2:t.sent,n({type:"REMOVE_POST",data:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),c(V(a))};if(t.user===n.id)return Object(r.jsx)("div",{children:Object(r.jsxs)($.a,{children:[Object(r.jsx)($.a.Header,{children:Object(r.jsxs)(Z.a.Toggle,{as:$.a.Body,variant:"link",eventKey:t.id,children:[t.content," ",Object(r.jsx)(H.a,{className:"deleteButton",onClick:function(){return s()},children:"delete"})]})}),Object(r.jsx)(Z.a.Collapse,{eventKey:t.id,children:Object(r.jsx)($.a.Body,{children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col",children:Object(r.jsx)(se,{postId:t.id,user:n})}),Object(r.jsx)("div",{className:"col",children:Object(r.jsx)(ie,{postId:t.id})})]})})})]})});var u=a.find((function(e){return e.id===t.user}));return Object(r.jsx)("div",{children:Object(r.jsxs)($.a,{children:[Object(r.jsx)($.a.Header,{children:Object(r.jsxs)(Z.a.Toggle,{as:$.a.Body,variant:"link",eventKey:t.id,children:[t.content," ",Object(r.jsxs)("p",{className:"by",children:["by",Object(r.jsxs)(G.b,{className:"by",to:"/user/".concat(u.url),children:["\xa0",u.name]})]})]})}),Object(r.jsx)(Z.a.Collapse,{eventKey:t.id,children:Object(r.jsx)($.a.Body,{children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col",children:Object(r.jsx)(se,{postId:t.id,user:n})}),Object(r.jsx)("div",{className:"col",children:Object(r.jsx)(ie,{postId:t.id})})]})})})]})})},le=function(){var e=Object(i.c)((function(e){return e.login})),t=Object(i.c)((function(e){return e.posts})),n=Object(i.c)((function(e){return e.users})),c=n.find((function(t){return t.username===e.username}));if(!c)return null;var a=n.filter((function(e){if(e.friends.includes(c.id))return e})).map((function(e){return e.id})).concat(c.id),s=t.filter((function(e){if(a.includes(e.user))return e}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Posts"}),Object(r.jsx)(Z.a,{defaultActiveKey:"0",children:s.map((function(e){return Object(r.jsx)(oe,{post:e,currentUser:c},e.id)}))})]})},je=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(i.b)();if(!Object(i.c)((function(e){return e.login})))return null;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Create new post"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,r={content:n,likes:0};a(""),s((t=r,function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.createNew(t);case 3:r=e.sent,n({type:"CREATE_NEW_POST",data:r}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error caught in postReducer",e.t0),n(M("error","Post can be at least 3 and at most 200 charachters long!")),setTimeout((function(){n(B())}),3e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(r.jsx)("textarea",{className:"post",value:n,placeholder:"Write a new post",onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)(H.a,{type:"submit",children:"Create new post"})]})]})},de=function(){return Object(i.c)((function(e){return e.login}))?Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(ee,{}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(te,{})}),Object(r.jsx)("div",{className:"col-sm-7",children:Object(r.jsx)(le,{})}),Object(r.jsx)("div",{className:"col-sm-3",children:Object(r.jsx)(je,{})})]})]})}):null},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NEW_SKILL":return e.concat(t.data);case"INIT_SKILLS":return t.data;case"REMOVE_SKILL":var n=e.filter((function(e){return e.id!==t.data}));return n;case"UPDATE_SKILL":var r=t.data.id;return e.map((function(e){return e.id!==r?e:t.data}))}return e},be=(n(93),function(e){var t=e.skill,n=e.creator,c=Object(i.b)(),a=function(e){var t,r=n.skills.filter((function(t){return t!==e})),a=Object(Q.a)(Object(Q.a)({},n),{},{skills:r});c((t=e,function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.remove(t);case 2:e.sent,n({type:"REMOVE_SKILL",data:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c(V(a))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[t.content," likes: ",t.likes.length," ",Object(r.jsx)(H.a,{className:"deleteButton",onClick:function(){return a(t.id)},children:"Delete"})]},t.id),Object(r.jsx)("hr",{})]})}),Oe=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(i.b)(),o=Object(i.c)((function(e){return e.login})),d=Object(i.c)((function(e){return e.skills})),f=Object(i.c)((function(e){return e.users})).find((function(e){return e.username===o.username})),b=d.filter((function(e){return e.user===f.id})).sort((function(e,t){return t.likes.length-e.likes.length}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h5",{children:"Add new skill"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t,r={content:n,likes:[]};a(""),s((t=r,function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.createNew(t);case 3:r=e.sent,n({type:"CREATE_NEW_SKILL",data:r}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error caught in postReducer",e.t0),n(M("error","Skill should be at least 1 and at most 20 charachters long!")),setTimeout((function(){n(B())}),3e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(r.jsx)("input",{value:n,placeholder:"New skill",onChange:function(e){return a(e.target.value)}}),Object(r.jsx)(H.a,{type:"submit",children:"Add new skill"})]}),Object(r.jsx)("hr",{}),b.map((function(e){return Object(r.jsx)(be,{skill:e,creator:f},e.id)}))]})},pe=function(){var e=Object(i.c)((function(e){return e.login})),t=Object(i.c)((function(e){return e.posts})),n=Object(i.c)((function(e){return e.users})).find((function(t){return t.username===e.username}));if(!n)return null;var c=t.filter((function(e){return e.user===n.id}));return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(ee,{}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(te,{})}),Object(r.jsxs)("div",{className:"col-sm-7",children:[Object(r.jsx)("h4",{children:"Me"}),Object(r.jsx)("h5",{children:"My posts:"}),Object(r.jsx)("hr",{}),c.map((function(e){return Object(r.jsxs)("p",{children:[e.content," ",Object(r.jsx)("hr",{})]},e.id)}))]}),Object(r.jsxs)("div",{className:"col-sm-3",children:[Object(r.jsx)("h4",{children:"My skills"}),Object(r.jsx)(Oe,{})]})]})]})},he=function(e){var t=e.skill,n=Object(i.b)(),c=Object(i.c)((function(e){return e.login})),a=Object(i.c)((function(e){return e.users})).find((function(e){return e.username===c.username})),s=function(){var e=t.likes.concat(a.id),r=Object(Q.a)(Object(Q.a)({},t),{},{likes:e});n(function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.update(e.id,e);case 2:r=t.sent,n({type:"UPDATE_SKILL",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r))};return t.likes.includes(a.id)?Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[t.content,": ",t.likes.length," likes. You liked it!"]},t.id),Object(r.jsx)("hr",{})]}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[t.content,": ",t.likes.length," likes. ",Object(r.jsx)("button",{onClick:function(){return s()},children:"like!"})]},t.id),Object(r.jsx)("hr",{})]})},xe=function(){var e=Object(D.g)().url,t=Object(i.c)((function(e){return e.posts})),n=Object(i.c)((function(e){return e.skills})),c=Object(i.c)((function(e){return e.users})).find((function(t){return t.url===e})),a=n.filter((function(e){return e.user===c.id}));if(!c)return null;var s=t.filter((function(e){return e.user===c.id})),u=a.sort((function(e,t){return t.likes.length-e.likes.length}));return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(ee,{}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-sm-2",children:Object(r.jsx)(te,{})}),Object(r.jsxs)("div",{className:"col-sm-7",children:[Object(r.jsx)("h4",{children:c.name}),Object(r.jsxs)("h5",{children:[c.name,"'s posts:"]}),s.map((function(e){return Object(r.jsx)("p",{children:e.content},e.id)}))]}),Object(r.jsxs)("div",{className:"col-sm-3",children:[Object(r.jsxs)("h4",{children:[c.name,"'s skills"]}),Object(r.jsx)("hr",{}),u.map((function(e){return Object(r.jsx)(he,{skill:e},e.id)}))]})]})]})},ve=function(){console.log("app is running");var e=Object(i.b)();Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:n=e.sent,t({type:"INIT_COMMENTS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=window.localStorage.getItem("loggedProjectUser"))&&(r=JSON.parse(n),h.setToken(r.token),k.setToken(r.token),S.setToken(r.token),U.setToken(r.token)),n&&(c=JSON.parse(n),t({type:"LOGIN",data:c}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:n=e.sent,t({type:"INIT_POSTS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.getAll();case 2:n=e.sent,t({type:"INIT_SKILLS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(B())}),[e]);var t=Object(i.c)((function(e){return e.login}));Object(i.c)((function(e){return e.users}));return Object(r.jsx)("div",{children:Object(r.jsxs)(D.c,{children:[Object(r.jsx)(D.a,{path:"/connections",children:Object(r.jsx)(ce,{})}),Object(r.jsx)(D.a,{path:"/personal",children:Object(r.jsx)(pe,{})}),Object(r.jsx)(D.a,{path:"/user/:url",children:Object(r.jsx)(xe,{})}),Object(r.jsx)(D.a,{path:"/home",children:Object(r.jsx)(de,{})}),Object(r.jsx)(D.a,{path:"/createUser",children:Object(r.jsx)(Y,{})}),Object(r.jsxs)(D.a,{path:"/",children:[null!==t&&Object(r.jsx)(de,{}),null===t&&Object(r.jsx)(J,{})]})]})})},me=(n(94),n(31)),ge=n(61),we=n(62),ke=Object(me.combineReducers)({users:z,login:K,posts:X,comments:ae,skills:fe,notification:P}),ye=Object(me.createStore)(ke,Object(we.composeWithDevTools)(Object(me.applyMiddleware)(ge.a)));s.a.render(Object(r.jsx)(i.a,{store:ye,children:Object(r.jsx)(G.a,{children:Object(r.jsx)(ve,{})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.bae28004.chunk.js.map